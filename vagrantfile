## Configuration
NUM_OF_MANAGERS=1
NUM_OF_LINUX_WORKERS=1
NUM_OF_WINDOWS_WORKERS=1

VIRTUAL_PROVIDER="hyperv"
VIRTUAL_LINUX_BOX="generic/debian9"
VIRTUAL_WINDOWS_BOX="gusztavvargadr/w16sc"

Vagrant.configure("2") do |config|

  

  (1..NUM_OF_MANAGERS).each do |mgrNumber|
    _MACHINE_NAME = "linManager-#{mgrNumber}"
    config.vm.define _MACHINE_NAME do |linManager|
      linManager.vm.box = VIRTUAL_LINUX_BOX
      linManager.vm.hostname = _MACHINE_NAME

      linManager.vm.provider VIRTUAL_PROVIDER do |h|
        h.cpus = 1
        h.memory = 512
        if (VIRTUAL_PROVIDER == "hyperv") 
          h.enable_virtualization_extensions = true
          h.differencing_disk = true
          h.vmname = _MACHINE_NAME 
        end       
        if (VIRTUAL_PROVIDER == "virtualbox") 
          h.name = _MACHINE_NAME 
        end
      end
    end
  end

  (1..NUM_OF_LINUX_WORKERS).each do |linWrkNumber|
    _MACHINE_NAME = "linWorker-#{linWrkNumber}"
    config.vm.define _MACHINE_NAME do |linWorker|
      linWorker.vm.box = VIRTUAL_LINUX_BOX
      linWorker.vm.hostname = _MACHINE_NAME

      linWorker.vm.provider VIRTUAL_PROVIDER do |h|
        h.cpus = 1
        h.memory = 512
        if (VIRTUAL_PROVIDER == "hyperv") 
          h.enable_virtualization_extensions = true
          h.differencing_disk = true
          h.vmname = _MACHINE_NAME 
        end       
        if (VIRTUAL_PROVIDER == "virtualbox") 
          h.name = _MACHINE_NAME 
        end
      end
    end
  end

  (1..NUM_OF_WINDOWS_WORKERS).each do |winWrkNumber|
    _MACHINE_NAME = "winWorker-#{winWrkNumber}"
    config.vm.define _MACHINE_NAME do |winWorker|
      winWorker.vm.box = VIRTUAL_WINDOWS_BOX
      winWorker.vm.hostname = _MACHINE_NAME
      #winWorker.vm.network "public_network"

      winWorker.vm.provider VIRTUAL_PROVIDER do |h|
        h.cpus = 1
        h.memory = 512
        if (VIRTUAL_PROVIDER == "hyperv") 
          h.enable_virtualization_extensions = true
          h.differencing_disk = true
          h.vmname = _MACHINE_NAME 
        end       
        if (VIRTUAL_PROVIDER == "virtualbox") 
          h.name = _MACHINE_NAME 
        end 
      end
    end
  end
end
